(function(c,y,N,f,L){"use strict";function O(e){if(e&&e.__esModule)return e;var o=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),o.default=e,Object.freeze(o)}var t=O(L);const $=c.webpack.findByProps("openModalLazy");let Z;const A=async e=>Z=$.openModal(o=>(e.props={...e.props,...o},e)),q=()=>$.closeModal(Z),x=c.webpack.findByProps("ModalRoot");c.webpack.findByDisplayName("Text")||c.webpack.findByDisplayName("LegacyText");const H=c.webpack.find(e=>e.DropdownSizes),Q=c.webpack.findByDisplayName("Spinner"),U="https://raw.githubusercontent.com/E-boi/assets/main/star.svg",W="https://raw.githubusercontent.com/E-boi/assets/main/ghfork.svg",Y="https://raw.githubusercontent.com/E-boi/assets/main/folder.svg",V="https://raw.githubusercontent.com/E-boi/assets/main/ghfile.svg",I=c.webpack.findByDisplayName("Arrow"),J=c.webpack.findByProps("parse","parseTopic"),z={markup:cumcord.modules.webpack.findByProps("markup").markup,scrollbarGhostHairline:cumcord.modules.webpack.findByProps("scrollbarGhostHairline").scrollbarGhostHairline};var X=({file:e,path:o})=>t.createElement("div",{className:z.markup},t.createElement("div",{className:"Gpath"},t.createElement("p",null,`/${o}`)),e.isImage?t.createElement("div",{className:`Gimg ${z.scrollbarGhostHairline}`},t.createElement("img",{src:e.content})):J.defaultRules.codeBlock.react({content:e.content,lang:e.type},null,{})),j=({dir:e,onClick:o,path:r})=>t.createElement("div",{className:r?"Gin-folder":"Gout-folder"},r&&t.createElement("div",{className:"Gpath"},t.createElement("p",null,`/${r}`)),e?.map(n=>t.createElement("p",{className:n.type==="dir"?"Gfolder":`Gfile ${n.name.split(".")[n.name.split(".").length-1]} ${n.name.includes(".")?"":"blank"}`},n.type==="dir"?[t.createElement("img",{src:Y,height:16,width:16}),t.createElement("a",{onClick:()=>o(n.path,"folder")},n.name)]:[t.createElement("img",{src:V,height:16,width:16}),t.createElement("a",{onClick:()=>o(n.name,"file")},n.name)])));const S={dividerDefault:c.webpack.findByProps("dividerDefault").dividerDefault,divider:c.webpack.find(e=>e.divider?.includes("divider-_")).divider};var _=({className:e})=>t.createElement("div",{className:`${S.divider} ${S.dividerDefault} ${e}`});const ee=c.webpack.findByDisplayName("FormItem"),te=c.webpack.findByDisplayName("SelectTempWrapper"),M={...c.webpack.findByProps("marginBottom20")};var oe=e=>{const o=e.children;return delete e.children,t.createElement(ee,{title:o,className:M.marginBottom20,required:e.required},t.createElement(te,{...e}),t.createElement(_,{className:[M.marginTop20,M.marginBottom20].join(" ")}))};const D={...c.webpack.findByProps("emptyStateImage","emptyStateSubtext")},re=["png","jpg"];var ne=({url:e,key:o,transitionState:r})=>{const[n,s]=t.useState(),[i,d]=t.useState(),[l,p]=t.useState(),[h,w]=t.useState(),[B,be]=t.useState(),[g,T]=t.useState(),[b,fe]=t.useState();i||le(e,o).then(a=>{T(a.default_branch),d(a)}).catch(a=>fe(a.message)),i&&!n&&K(e,g,o).then(a=>s(a)),B||ie(e,o).then(a=>be(a));let v;if(l&&!h){const a=l[0]?.path.split("/");v=l[0].path.replace(`/${a[a.length-1]}`,"")}else h&&(v=h.path);return t.createElement(x.ModalRoot,{transitionState:r,className:`githubModel ${h?"infile":""}`},t.createElement(x.ModalHeader,null,t.createElement("a",{className:"repo-name",href:i?.html_urk||`https://github.com/${e}`,target:"_blank"},i?.name||e),i&&t.createElement("a",{className:"star-svg",href:`${i.html_url}/stargazers`,target:"_blank"},t.createElement("img",{src:U}),t.createElement("p",null,i.stargazers_count)),l&&!h&&t.createElement("div",{className:"back-outfile",onClick:()=>{const a=ae(l);a||p(null),E(e,a,g,o).then(u=>p(u))}},t.createElement(I,{direction:"LEFT"})),h&&t.createElement("div",{className:"back-outfile",onClick:()=>w(null)},t.createElement(I,{direction:"LEFT"})),B&&t.createElement(oe,{className:"Gbranches",value:g,onChange:({value:a})=>{g!==a&&(p(null),w(null),T(a),K(e,a,o).then(u=>s(u)))},options:B.map(a=>({label:a.name,value:a.name}))})),t.createElement(x.ModalContent,null,b&&t.createElement("div",{className:"Gerror"},t.createElement("div",{className:D.emptyStateImage}),t.createElement("p",{className:`Gerror-text ${D.emptyStateSubtext}`},b)),!i&&!b&&t.createElement("p",{className:"Gfetching"},"Getting repo",t.createElement(Q,{type:"wanderingCubes"})),n&&!l&&!b&&!h&&t.createElement(j,{dir:n,onClick:(a,u)=>u==="folder"?E(e,a,g,o).then(m=>p(m)):R(n,a).then(m=>w(m))}),l&&!b&&!h&&t.createElement(j,{dir:l,onClick:(a,u)=>u==="folder"?E(e,a,g,o).then(m=>p(m)):R(l,a).then(m=>w(m)),path:v}),h&&!b&&t.createElement(X,{file:h,path:v})),t.createElement(x.ModalFooter,null,t.createElement(H,{onClick:()=>q()},"Close"),i&&t.createElement("div",{className:"repo-info"},t.createElement("a",{className:"owner-profile",href:i.owner.html_url,target:"_blank"},t.createElement("img",{height:32,width:32,src:i.owner.avatar_url}),t.createElement("p",null,i.owner.login)),t.createElement("a",{className:"fork-svg",href:`${i.html_url}/network/members`,target:"_blank"},t.createElement("img",{src:W}),t.createElement("p",null,i.forks)))))};function ae(e){const o=e[0].path.split("/");if(o.length!==2)return e[0].path.replace(`/${o[o.length-2]}/${o[o.length-1]}`,"")}async function ie(e,o){const r=await fetch(`https://api.github.com/repos/${e}/branches?per_page=100`,{headers:o&&{Authorization:`token ${o}`}});return r.ok?await r.json():void 0}async function le(e,o){const r=await fetch(`https://api.github.com/repos/${e}`,{headers:o&&{Authorization:`token ${o}`}});if(!r.ok)throw Error((await r.json()).message);return await r.json()}async function K(e,o,r){const n=await fetch(`https://api.github.com/repos/${e}/contents?ref=${o}`,{headers:r&&{Authorization:`token ${r}`}});if(!n.ok)return;const s=await n.json(),i=s.map(l=>l.type==="dir"&&l).filter(l=>l),d=s.map(l=>l.type==="file"&&l).filter(l=>l);return[...i,...d]}async function E(e,o,r,n){const s=await fetch(`https://api.github.com/repos/${e}/contents/${o}?ref=${r}`,{headers:n&&{Authorization:`token ${n}`}});if(!s.ok)return;const i=await s.json(),d=i.map(p=>p.type==="dir"&&p).filter(p=>p),l=i.map(p=>p.type==="file"&&p).filter(p=>p);return[...d,...l]}async function R(e,o){const r=e.filter(l=>l.type==="file"&&l.name===o),n=o.split("."),s=re.includes(n[n.length-1]);if(r.length===0)return;if(s)return{path:r[0].path,content:r[0].download_url,type:n[n.length-1],isImage:s};const d=await(await fetch(r[0].download_url)).text();return{path:r[0].path,content:d,type:n[n.length-1],isImage:s}}var ce=()=>y.injectCSS(".infile{height:fit-content!important;min-width:600px!important;width:80%!important;margin:auto}.infile .markup-eYLPri pre{max-width:100%}.infile .markup-eYLPri{margin-left:5px;margin-right:5px}.infile .content-2hZxGK{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.infile .hljs{padding:0!important}.infile .hljs .powercord-codeblock-table{margin-left:7px}.infile .hljs .powercord-codeblock-lang{padding:4px;font-size:12px}.infile .hljs .powercord-codeblock-copy-btn{position:absolute;height:20px;opacity:1;top:29px}.infile .hljs .powercord-codeblock-copy-btn:hover{background-color:var(--background-primary)}.Gpath{margin:0!important;height:25px}.Gpath p{position:absolute;padding-left:10px;left:0;top:-6px}.githubModel{border-radius:10px;width:700px;height:450px}.githubModel .header-1zd7se{border-bottom:solid 2px var(--background-secondary);-webkit-box-shadow:none!important;box-shadow:none!important;color:var(--text-normal);padding:0 0 0 10px;border-radius:0;overflow:unset;height:60px}.githubModel .header-1zd7se .back-outfile{background-color:#0000001a;border:solid 1px rgba(32,34,37,.5);border-radius:7px;position:absolute;padding:6px 10px;right:317px}.githubModel .header-1zd7se .back-outfile:hover{background-color:var(--background-tertiary);cursor:pointer}.githubModel .header-1zd7se .repo-name{color:var(--text-normal);text-transform:capitalize;font-size:24px;margin:0}.githubModel .header-1zd7se .repo-name:hover{text-decoration:underline;cursor:pointer}.githubModel .header-1zd7se .star-svg{color:var(--text-normal);border-left:solid 1px rgba(255,255,255,.1);position:relative;margin-left:8px;padding-left:8px;display:-webkit-box;display:-ms-flexbox;display:flex;height:25px;bottom:2px}.githubModel .header-1zd7se .star-svg img{fill:var(--text-normal);position:relative;height:20px;top:4px}.githubModel .header-1zd7se .star-svg p{position:relative;font-size:18px;bottom:9px;left:5px}.githubModel .header-1zd7se .star-svg p:hover{text-decoration:underline;cursor:pointer}.githubModel .header-1zd7se .marginBottom20-315RVT{position:absolute;width:300px;right:10px;margin:0}.Gbranches .divider-_0um2u,.Gbranches .css-o3gndj-placeholder{display:none}.Gbranches .css-gvi9bl-control{border-radius:7px}.Gbranches .css-3vaxre-menu{margin-top:7px!important;border-radius:7px}.Gbranches .css-3vaxre-menu ::-webkit-scrollbar{display:none}.Gbranches:hover{cursor:pointer}.githubModel .content-2hZxGK{border-radius:0;padding:0}.githubModel .content-2hZxGK .Gimg{overflow-x:auto}.githubModel .content-2hZxGK .Gerror{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.githubModel .content-2hZxGK .Gerror div{margin-top:20px;margin-bottom:20px}.githubModel .content-2hZxGK .Gfetching{display:-ms-grid;display:grid;-ms-grid-rows:2rem;grid-template-rows:2rem;text-align:center;color:var(--text-normal)}.githubModel .content-2hZxGK .Gpath{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:var(--text-normal);margin-top:7px;padding-bottom:7px;border-bottom:solid 2px var(--background-secondary)}.githubModel .content-2hZxGK .Gback-button{margin-bottom:12px;margin-top:-11px}.githubModel .content-2hZxGK .Gback-button img{padding:3px 10px 0;position:relative;height:20px;width:20px;top:3px}.githubModel .content-2hZxGK .Gback-button a{background-color:var(--background-secondary);color:var(--text-normal);border-radius:7px;padding:5px 20px}.githubModel .content-2hZxGK .Gback-button a:hover{background-color:var(--background-tertiary)}.githubModel .content-2hZxGK .Gfile,.githubModel .content-2hZxGK .Gfolder{border-top:solid 1px var(--background-secondary);padding:10px 0 0 10px;margin:10px 0}.githubModel .content-2hZxGK .Gfile a,.githubModel .content-2hZxGK .Gfolder a{color:var(--text-normal);padding-left:7px}.githubModel .content-2hZxGK .Gfile a:hover,.githubModel .content-2hZxGK .Gfolder a:hover{text-decoration:underline;color:var(--text-link)}.githubModel .content-2hZxGK .Gfile img,.githubModel .content-2hZxGK .Gfolder img{position:relative;top:2px}.githubModel .content-2hZxGK::-webkit-scrollbar{display:none}.githubModel .content-2hZxGK .Gin-folder .Gback-button{margin-bottom:13px!important;padding-top:14px}.githubModel .footer-31IekZ{border-top:solid 2px var(--background-secondary-alt);border-radius:0 0 7px 7px;overflow:unset;height:57px;padding:0}.githubModel .footer-31IekZ .button-f2h6uQ{background-color:var(--background-tertiary);border-radius:7px;position:absolute;width:40%;right:6px;top:10px}.githubModel .footer-31IekZ .button-f2h6uQ:hover{background-color:var(--background-primary)}.githubModel .footer-31IekZ .repo-info{color:var(--text-normal);position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;left:10px;width:57.5%}.githubModel .footer-31IekZ .owner-profile{color:var(--text-normal);position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;top:7px}.githubModel .footer-31IekZ .owner-profile img{border-radius:5px;height:40px;width:40px}.githubModel .footer-31IekZ .owner-profile p{text-transform:capitalize;padding:11px 0 0 8px;font-size:18px;margin:0}.githubModel .footer-31IekZ .owner-profile p:hover{text-decoration:underline;cursor:pointer}.githubModel .footer-31IekZ .fork-svg{color:var(--text-normal);padding:18px 4px 0 0;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;right:4px}.githubModel .footer-31IekZ .fork-svg p{padding-left:4px;font-size:20px;margin:0}.githubModel .footer-31IekZ .fork-svg p:hover{text-decoration:underline;cursor:pointer}.githubModel .footer-31IekZ .fork-svg img{fill:var(--text-normal);height:20px}");const se=c.webpack.findByDisplayName("TextInput"),pe=c.webpack.findByDisplayName("FormItem"),G={...c.webpack.findByProps("marginBottom20")};var de=e=>{const o=e.children;return delete e.children,t.createElement(pe,{title:o,required:e.required,className:G.marginBottom20},t.createElement(se,{...e}),t.createElement(_,{className:[G.marginTop20,G.marginBottom20].join(" ")}))},he=({persist:e})=>(N.useNest(e),t.createElement("div",null,t.createElement(de,{value:e.ghost.apikey,onChange:o=>e.store.apikey=o},"Api key"),t.createElement("p",null,t.createElement("a",{href:"https://github.com/settings/tokens/new?description=GitHub%20in%20Discord&scopes=public_repo",target:"_blank"},"Make a token (just scroll down and click generate token and copy and paste the token)"))));const C=c.webpack.findByProps("MenuGroup","MenuItem");c.webpack.find(e=>e.default?.displayName==="MessageContextMenu");const F=/^https?:\/\/(www.)?github.com\/[\w-]+\/[\w-]+\/?/,k=[];let P;const ue=async(e,o)=>{const r=c.webpack.findByDisplayName(e,!1);if(r)o(r);else{const n=c.webpack.findByProps("openContextMenuLazy");k.unshift(y.before("openContextMenuLazy",n,s=>{const i=s[1];return s[1]=async()=>{const d=await i(s[0]);return l=>{const p=d(l);return p?.type?.displayName===e&&o&&(k[0](),o(c.webpack.findByDisplayName(e,!1)),o=!1),p}},s}))}};var me=({persist:e})=>({onLoad(){P=ce(),ue("MessageContextMenu",o=>{k.push(y.after("default",o,([{message:r,target:n}],s)=>{if(!r.content.includes("https://github.com/")||!r.content.includes("https://github.com/"))return;const i=n.href?.match(F)?.[0]||ge(r.content);return i.split("/").length<5||N.findInReactTree(s,d=>d?.props?.id==="githubModal")||s.props.children.splice(4,0,f.React.createElement(C.MenuGroup,null,f.React.createElement(C.MenuItem,{action:()=>A(f.React.createElement(ne,{url:`${i.split("/")[3]}/${i.split("/")[4]}`,key:e.ghost.apikey})),id:"githubModal",label:"Open"}))),s}))})},onUnload(){P?.(),k.forEach(o=>o?.())},settings:f.React.createElement(he,{persist:e})});function ge(e){return e.replace("tree","blob").replace(/(?:\n|<|>|\*|_|`)/g," ").split(" ").filter(r=>r.match(F))[0]}return me})(cumcord.modules,cumcord.patcher,cumcord.utils,cumcord.modules.common,cumcord.modules.common.React);
