(function(s,E,G,e){"use strict";const B=s.webpack.findByProps("openModalLazy");let z;const P=async t=>z=B.openModal(a=>(t.props={...t.props,...a},t)),L=()=>B.closeModal(z),x=s.webpack.findByProps("ModalRoot");s.webpack.findByDisplayName("Text");const q=s.webpack.find(t=>t.DropdownSizes),A=s.webpack.findByDisplayName("Spinner"),V="https://raw.githubusercontent.com/E-boi/assets/main/star.svg",H="https://raw.githubusercontent.com/E-boi/assets/main/ghfork.svg",O="https://raw.githubusercontent.com/E-boi/assets/main/folder.svg",Q="https://raw.githubusercontent.com/E-boi/assets/main/ghfile.svg",$=s.webpack.findByDisplayName("Arrow"),U=s.webpack.findByProps("parse","parseTopic"),I={markup:cumcord.modules.webpack.findByProps("markup").markup,scrollbarGhostHairline:cumcord.modules.webpack.findByProps("scrollbarGhostHairline").scrollbarGhostHairline};var W=({file:t,path:a})=>e.React.createElement("div",{className:I.markup},e.React.createElement("div",{className:"Gpath"},e.React.createElement("p",null,`/${a}`)),t.isImage?e.React.createElement("div",{className:`Gimg ${I.scrollbarGhostHairline}`},e.React.createElement("img",{src:t.content})):U.defaultRules.codeBlock.react({content:t.content,lang:t.type},null,{})),N=({dir:t,onClick:a,path:n})=>e.React.createElement("div",{className:n?"Gin-folder":"Gout-folder"},n&&e.React.createElement("div",{className:"Gpath"},e.React.createElement("p",null,`/${n}`)),t?.map(r=>e.React.createElement("p",{className:r.type==="dir"?"Gfolder":`Gfile ${r.name.split(".")[r.name.split(".").length-1]} ${r.name.includes(".")?"":"blank"}`},r.type==="dir"?[e.React.createElement("img",{src:O,height:16,width:16}),e.React.createElement("a",{onClick:()=>a(r.path,"folder")},r.name)]:[e.React.createElement("img",{src:Q,height:16,width:16}),e.React.createElement("a",{onClick:()=>a(r.name,"file")},r.name)])));const Z={dividerDefault:s.webpack.findByProps("dividerDefault").dividerDefault,divider:s.webpack.find(t=>t.divider?.includes("divider-_")).divider};var j=({className:t})=>e.React.createElement("div",{className:`${Z.divider} ${Z.dividerDefault} ${t}`});const Y=s.webpack.findByDisplayName("FormItem"),J=s.webpack.findByDisplayName("SelectTempWrapper"),v={...s.webpack.findByProps("marginBottom20")};var X=t=>{const a=t.children;return delete t.children,e.React.createElement(Y,{title:a,className:v.marginBottom20,required:t.required},e.React.createElement(J,{...t}),e.React.createElement(j,{className:[v.marginTop20,v.marginBottom20].join(" ")}))};const S={...s.webpack.findByProps("emptyStateImage","emptyStateSubtext")},ee=["png","jpg"];var te=({url:t,key:a,transitionState:n})=>{const[r,c]=e.React.useState(),[i,p]=e.React.useState(),[l,d]=e.React.useState(),[h,k]=e.React.useState(),[M,ue]=e.React.useState(),[b,F]=e.React.useState(),[f,ge]=e.React.useState();i||ne(t,a).then(o=>{F(o.default_branch),p(o)}).catch(o=>ge(o.message)),i&&!r&&K(t,b,a).then(o=>c(o)),M||re(t,a).then(o=>ue(o));let w;if(l&&!h){const o=l[0]?.path.split("/");w=l[0].path.replace(`/${o[o.length-1]}`,"")}else h&&(w=h.path);return e.React.createElement(x.ModalRoot,{transitionState:n,className:`githubModel ${h?"infile":""}`},e.React.createElement(x.ModalHeader,null,e.React.createElement("a",{className:"repo-name",href:i?.html_urk||`https://github.com/${t}`,target:"_blank"},i?.name||t),i&&e.React.createElement("a",{className:"star-svg",href:`${i.html_url}/stargazers`,target:"_blank"},e.React.createElement("img",{src:V}),e.React.createElement("p",null,i.stargazers_count)),l&&!h&&e.React.createElement("div",{className:"back-outfile",onClick:()=>{const o=ae(l);o||d(null),y(t,o,b,a).then(u=>d(u))}},e.React.createElement($,{direction:"LEFT"})),h&&e.React.createElement("div",{className:"back-outfile",onClick:()=>k(null)},e.React.createElement($,{direction:"LEFT"})),M&&e.React.createElement(X,{className:"Gbranches",value:b,onChange:({value:o})=>{b!==o&&(d(null),k(null),F(o),K(t,o,a).then(u=>c(u)))},options:M.map(o=>({label:o.name,value:o.name}))})),e.React.createElement(x.ModalContent,null,f&&e.React.createElement("div",{className:"Gerror"},e.React.createElement("div",{className:S.emptyStateImage}),e.React.createElement("p",{className:`Gerror-text ${S.emptyStateSubtext}`},f)),!i&&!f&&e.React.createElement("p",{className:"Gfetching"},"Getting repo",e.React.createElement(A,{type:"wanderingCubes"})),r&&!l&&!f&&!h&&e.React.createElement(N,{dir:r,onClick:(o,u)=>u==="folder"?y(t,o,b,a).then(g=>d(g)):D(r,o).then(g=>k(g))}),l&&!f&&!h&&e.React.createElement(N,{dir:l,onClick:(o,u)=>u==="folder"?y(t,o,b,a).then(g=>d(g)):D(l,o).then(g=>k(g)),path:w}),h&&!f&&e.React.createElement(W,{file:h,path:w})),e.React.createElement(x.ModalFooter,null,e.React.createElement(q,{onClick:()=>L()},"Close"),i&&e.React.createElement("div",{className:"repo-info"},e.React.createElement("a",{className:"owner-profile",href:i.owner.html_url,target:"_blank"},e.React.createElement("img",{height:32,width:32,src:i.owner.avatar_url}),e.React.createElement("p",null,i.owner.login)),e.React.createElement("a",{className:"fork-svg",href:`${i.html_url}/network/members`,target:"_blank"},e.React.createElement("img",{src:H}),e.React.createElement("p",null,i.forks)))))};function ae(t){const a=t[0].path.split("/");if(a.length!==2)return t[0].path.replace(`/${a[a.length-2]}/${a[a.length-1]}`,"")}async function re(t,a){const n=await fetch(`https://api.github.com/repos/${t}/branches?per_page=100`,{headers:a&&{Authorization:`token ${a}`}});return n.ok?await n.json():void 0}async function ne(t,a){const n=await fetch(`https://api.github.com/repos/${t}`,{headers:a&&{Authorization:`token ${a}`}});if(!n.ok)throw Error((await n.json()).message);return await n.json()}async function K(t,a,n){const r=await fetch(`https://api.github.com/repos/${t}/contents?ref=${a}`,{headers:n&&{Authorization:`token ${n}`}});if(!r.ok)return;const c=await r.json(),i=c.map(l=>l.type==="dir"&&l).filter(l=>l),p=c.map(l=>l.type==="file"&&l).filter(l=>l);return[...i,...p]}async function y(t,a,n,r){const c=await fetch(`https://api.github.com/repos/${t}/contents/${a}?ref=${n}`,{headers:r&&{Authorization:`token ${r}`}});if(!c.ok)return;const i=await c.json(),p=i.map(d=>d.type==="dir"&&d).filter(d=>d),l=i.map(d=>d.type==="file"&&d).filter(d=>d);return[...p,...l]}async function D(t,a){const n=t.filter(l=>l.type==="file"&&l.name===a),r=a.split("."),c=ee.includes(r[r.length-1]);if(n.length===0)return;if(c)return{path:n[0].path,content:n[0].download_url,type:r[r.length-1],isImage:c};const p=await(await fetch(n[0].download_url)).text();return{path:n[0].path,content:p,type:r[r.length-1],isImage:c}}var oe=()=>cumcord.patcher.injectCSS(".infile{height:fit-content!important;min-width:600px!important;width:80%!important;margin:auto}.infile .markup-eYLPri pre{max-width:100%}.infile .markup-eYLPri{margin-left:5px;margin-right:5px}.infile .content-2hZxGK{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.infile .hljs{padding:0!important}.infile .hljs .powercord-codeblock-table{margin-left:7px}.infile .hljs .powercord-codeblock-lang{padding:4px;font-size:12px}.infile .hljs .powercord-codeblock-copy-btn{position:absolute;height:20px;opacity:1;top:29px}.infile .hljs .powercord-codeblock-copy-btn:hover{background-color:var(--background-primary)}.Gpath{margin:0!important;height:25px}.Gpath p{position:absolute;padding-left:10px;left:0;top:-6px}.githubModel{border-radius:10px;width:700px;height:450px}.githubModel .header-1zd7se{border-bottom:solid 2px var(--background-secondary);-webkit-box-shadow:none!important;box-shadow:none!important;color:var(--text-normal);padding:0 0 0 10px;border-radius:0;overflow:unset;height:60px}.githubModel .header-1zd7se .back-outfile{background-color:#0000001a;border:solid 1px rgba(32,34,37,.5);border-radius:7px;position:absolute;padding:6px 10px;right:317px}.githubModel .header-1zd7se .back-outfile:hover{background-color:var(--background-tertiary);cursor:pointer}.githubModel .header-1zd7se .repo-name{color:var(--text-normal);text-transform:capitalize;font-size:24px;margin:0}.githubModel .header-1zd7se .repo-name:hover{text-decoration:underline;cursor:pointer}.githubModel .header-1zd7se .star-svg{color:var(--text-normal);border-left:solid 1px rgba(255,255,255,.1);position:relative;margin-left:8px;padding-left:8px;display:-webkit-box;display:-ms-flexbox;display:flex;height:25px;bottom:2px}.githubModel .header-1zd7se .star-svg img{fill:var(--text-normal);position:relative;height:20px;top:4px}.githubModel .header-1zd7se .star-svg p{position:relative;font-size:18px;bottom:9px;left:5px}.githubModel .header-1zd7se .star-svg p:hover{text-decoration:underline;cursor:pointer}.githubModel .header-1zd7se .marginBottom20-315RVT{position:absolute;width:300px;right:10px;margin:0}.githubModel .header-1zd7se .marginBottom20-315RVT .divider-IqmEqJ,.githubModel .header-1zd7se .marginBottom20-315RVT .css-o3gndj-placeholder{display:none}.githubModel .header-1zd7se .marginBottom20-315RVT .css-gvi9bl-control{border-radius:7px}.githubModel .header-1zd7se .marginBottom20-315RVT .css-3vaxre-menu{margin-top:7px!important;border-radius:7px}.githubModel .header-1zd7se .marginBottom20-315RVT .css-3vaxre-menu ::-webkit-scrollbar{display:none}.githubModel .header-1zd7se .marginBottom20-315RVT:hover{cursor:pointer}.githubModel .content-2hZxGK{border-radius:0;padding:0}.githubModel .content-2hZxGK .Gimg{overflow-x:auto}.githubModel .content-2hZxGK .Gerror{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.githubModel .content-2hZxGK .Gerror div{margin-top:20px;margin-bottom:20px}.githubModel .content-2hZxGK .Gfetching{display:-ms-grid;display:grid;-ms-grid-rows:2rem;grid-template-rows:2rem;text-align:center;color:var(--text-normal)}.githubModel .content-2hZxGK .Gpath{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:var(--text-normal);margin-top:7px;padding-bottom:7px;border-bottom:solid 2px var(--background-secondary)}.githubModel .content-2hZxGK .Gback-button{margin-bottom:12px;margin-top:-11px}.githubModel .content-2hZxGK .Gback-button img{padding:3px 10px 0;position:relative;height:20px;width:20px;top:3px}.githubModel .content-2hZxGK .Gback-button a{background-color:var(--background-secondary);color:var(--text-normal);border-radius:7px;padding:5px 20px}.githubModel .content-2hZxGK .Gback-button a:hover{background-color:var(--background-tertiary)}.githubModel .content-2hZxGK .Gfile,.githubModel .content-2hZxGK .Gfolder{border-top:solid 1px var(--background-secondary);padding:10px 0 0 10px;margin:10px 0}.githubModel .content-2hZxGK .Gfile a,.githubModel .content-2hZxGK .Gfolder a{color:var(--text-normal);padding-left:7px}.githubModel .content-2hZxGK .Gfile a:hover,.githubModel .content-2hZxGK .Gfolder a:hover{text-decoration:underline;color:var(--text-link)}.githubModel .content-2hZxGK .Gfile img,.githubModel .content-2hZxGK .Gfolder img{position:relative;top:2px}.githubModel .content-2hZxGK::-webkit-scrollbar{display:none}.githubModel .content-2hZxGK .Gin-folder .Gback-button{margin-bottom:13px!important;padding-top:14px}.githubModel .footer-31IekZ{border-top:solid 2px var(--background-secondary-alt);border-radius:0 0 7px 7px;overflow:unset;height:57px;padding:0}.githubModel .footer-31IekZ .button-f2h6uQ{background-color:var(--background-tertiary);border-radius:7px;position:absolute;width:40%;right:6px;top:10px}.githubModel .footer-31IekZ .button-f2h6uQ:hover{background-color:var(--background-primary)}.githubModel .footer-31IekZ .repo-info{color:var(--text-normal);position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;left:10px;width:57.5%}.githubModel .footer-31IekZ .owner-profile{color:var(--text-normal);position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;top:7px}.githubModel .footer-31IekZ .owner-profile img{border-radius:5px;height:40px;width:40px}.githubModel .footer-31IekZ .owner-profile p{text-transform:capitalize;padding:11px 0 0 8px;font-size:18px;margin:0}.githubModel .footer-31IekZ .owner-profile p:hover{text-decoration:underline;cursor:pointer}.githubModel .footer-31IekZ .fork-svg{color:var(--text-normal);padding:18px 4px 0 0;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;right:4px}.githubModel .footer-31IekZ .fork-svg p{padding-left:4px;font-size:20px;margin:0}.githubModel .footer-31IekZ .fork-svg p:hover{text-decoration:underline;cursor:pointer}.githubModel .footer-31IekZ .fork-svg img{fill:var(--text-normal);height:20px}");const ie=s.webpack.findByDisplayName("TextInput"),le=s.webpack.findByDisplayName("FormItem"),R={...s.webpack.findByProps("marginBottom20")};var ce=t=>{const a=t.children;return delete t.children,e.React.createElement(le,{title:a,required:t.required,className:R.marginBottom20},e.React.createElement(ie,{...t}),e.React.createElement(j,{className:[R.marginTop20,R.marginBottom20].join(" ")}))},se=({persist:t})=>(G.useNest(t),e.React.createElement("div",null,e.React.createElement(ce,{value:t.ghost.apikey,onChange:a=>t.store.apikey=a},"Api key"),e.React.createElement("p",null,e.React.createElement("a",{href:"https://github.com/settings/tokens/new?description=GitHub%20in%20Discord&scopes=public_repo",target:"_blank"},"Make a token (just scroll down and click generate token and copy and paste the token)"))));const T=s.webpack.findByProps("MenuGroup","MenuItem");s.webpack.find(t=>t.default?.displayName==="MessageContextMenu");const _=/^https?:\/\/(www.)?github.com\/[\w-]+\/[\w-]+\/?/,m=[];let C;const de=async(t,a)=>{const n=s.webpack.findByDisplayName(t,!1);if(n)a(n);else{const r=s.webpack.findByProps("openContextMenuLazy");m.unshift(E.before("openContextMenuLazy",r,c=>{const i=c[1];return c[1]=async()=>{const p=await i(c[0]);return l=>{const d=p(l);return d?.type?.displayName===t&&a&&(m[0](),a(s.webpack.findByDisplayName(t,!1)),a=!1),d}},c}))}};var pe=({persist:t})=>({onLoad(){C=oe(),de("MessageContextMenu",a=>{m.push(E.after("default",a,([{message:n,target:r}],c)=>{if(!n.content.includes("https://github.com/")||!n.content.includes("https://github.com/"))return;const i=r.href?.match(_)?.[0]||he(n.content);return i.split("/").length<5||G.findInReactTree(c,p=>p?.props?.id==="githubModal")||c.props.children.splice(4,0,e.React.createElement(T.MenuGroup,null,e.React.createElement(T.MenuItem,{action:()=>P(e.React.createElement(te,{url:`${i.split("/")[3]}/${i.split("/")[4]}`,key:t.ghost.apikey})),id:"githubModal",label:"Open"}))),c}))})},onUnload(){C?.(),m.forEach(a=>a?.())},settings:e.React.createElement(se,{persist:t})});function he(t){return t.replace("tree","blob").replace(/(?:\n|<|>|\*|_|`)/g," ").split(" ").filter(n=>n.match(_))[0]}return pe})(cumcord.modules,cumcord.patcher,cumcord.utils,cumcord.modules.common);
