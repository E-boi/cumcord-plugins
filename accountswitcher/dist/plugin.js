(function(a,e,A,C){"use strict";const w=a.webpack.findByProps("TooltipContainer").TooltipContainer,f=a.webpack.findByProps("push","popWithKey"),b=t=>f.push(()=>e.React.createElement(t)),u=()=>f.pop(),l=a.webpack.findByDisplayName("DeprecatedModal"),k=a.webpack.findByDisplayName("FormTitle"),x=a.webpack.findByDisplayName("Card"),i=a.webpack.find(t=>t.DropdownSizes),y=a.webpack.findByDisplayName("Text"),N=a.webpack.findByDisplayName("Pencil"),R={divider:a.webpack.findByPropsAll("divider")[1].divider,dividerDefault:a.webpack.findByProps("dividerDefault").dividerDefault};var T=({className:t})=>e.React.createElement("div",{className:`${R.divider} ${R.dividerDefault} ${t}`});const P=a.webpack.findByDisplayName("FormItem"),L=a.webpack.findByDisplayName("FormText"),d={...a.webpack.findByProps("marginBottom20"),...a.webpack.findByProps("formText"),...a.webpack.findByDisplayName("Flex")};var D=t=>e.React.createElement(P,{title:t.title,required:t.required,className:`${d.Direction.VERTICAL} ${d.Justify.START} ${d.Align.STRETCH} ${d.Wrap.NO_WRAP} ${d.marginBottom20}`},t.children,t.note&&e.React.createElement(L,{className:`${d.description} ${d.marginTop8}`},t.note),e.React.createElement(T,{className:[d.marginTop20].join(" ")}));const S=a.webpack.findByDisplayName("TextInput");var p=t=>{const s=t.children;return delete t.children,e.React.createElement(D,{title:s,required:t.required,note:t.note},e.React.createElement(S,{...t}))},H=({account:t,persist:s})=>{const[n,c]=e.React.useState(t);return e.React.createElement(l,{className:"acc-switch-modal"},e.React.createElement(l.Header,null,e.React.createElement(k,{tag:"h3"},"Add Account")),e.React.createElement(l.Content,null,e.React.createElement(x,null,e.React.createElement(p,{value:n.name,onChange:o=>c({...n,name:o})},"Name:"),e.React.createElement(p,{value:n.pfp,onChange:o=>c({...n,pfp:o})},"Profile:"),e.React.createElement(p,{value:n.token,onChange:o=>c({...n,token:o})},"Token:"))),e.React.createElement(l.Footer,null,e.React.createElement(i,{onClick:()=>{s.store.accounts.push(n),u()}},"Save"),e.React.createElement(i,{onClick:u},"Back")))},$=({account:t,idx:s,persist:n})=>{const[c,o]=e.React.useState(t);return e.React.createElement(l,{className:"acc-switch-modal"},e.React.createElement(l.Header,null,e.React.createElement(k,{tag:"h3"},"Edit Account")),e.React.createElement(l.Content,null,e.React.createElement(x,null,e.React.createElement(p,{value:c.name,onChange:r=>o({...c,name:r})},"Name:"),e.React.createElement(p,{value:c.pfp,onChange:r=>o({...c,pfp:r})},"Profile:"),e.React.createElement(p,{value:c.token,onChange:r=>o({...c,token:r})},"Token:"))),e.React.createElement(l.Footer,null,e.React.createElement(i,{onClick:()=>{n.store.accounts[s]=c,u()}},"Save"),e.React.createElement(i,{onClick:u},"Back")))};const{getCurrentUser:Z}=a.webpack.findByProps("getCurrentUser"),{getToken:h}=a.webpack.findByProps("getToken"),{loginToken:F}=a.webpack.findByProps("loginToken");var I=({persist:t})=>{const[s,n]=e.React.useState({}),[c,o]=e.React.useState();return C.useNest(t),e.React.createElement(l,{className:"acc-switch-modal"},e.React.createElement(l.Header,null,e.React.createElement(k,{tag:"h3"},"Accounts")),e.React.createElement(l.Content,null,t.ghost.accounts?.map((r,B)=>e.React.createElement(x,null,e.React.createElement("div",{className:`account ${c===r.token&&"selected-account"}`,onClick:g=>{g.target.type=="button"||g.target.parentElement.parentElement?.parentElement.type==="button"||g.target.parentElement.className==="Token"||o(r.token)}},e.React.createElement("img",{src:r.pfp}),e.React.createElement("div",{className:"account-details"},e.React.createElement("div",{className:"accountName"},r.name,e.React.createElement(w,{text:"Edit",position:"top"},e.React.createElement(N,{onClick:()=>b(()=>e.React.createElement($,{account:r,idx:B,persist:t}))}))),e.React.createElement("div",{className:"Token"},e.React.createElement(y,{className:"tokenText"},"Token:"),e.React.createElement(y,{className:`tokenValue ${s[r.token]&&"reveal"}`,onClick:()=>n({...s,[r.token]:!s[r.token]})},r.token))),e.React.createElement("div",{className:"account-buttons"},e.React.createElement(i,{onClick:()=>{t.store.accounts.splice(B,1)},color:i.Colors.RED,size:i.Sizes.SMALL},"X")))))),e.React.createElement(l.Footer,null,e.React.createElement(i,{color:c?i.Colors.BRAND:i.Colors.GREY,onClick:()=>j(c)},"Switch"),e.React.createElement(i,{onClick:()=>b(()=>e.React.createElement(H,{account:z(),persist:t}))},"Add account")))};function z(){const t=Z();return{name:t.tag,token:h(),pfp:t.getAvatarURL()}}function j(t){!t||h()!==t&&(u(),F(t))}var V=e.React.memo(t=>e.React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",...t},e.React.createElement("g",null,e.React.createElement("rect",{fill:"none",height:"24",width:"24",x:"0"})),e.React.createElement("g",null,e.React.createElement("g",null,e.React.createElement("polygon",{points:"7.41,13.41 6,12 2,16 6,20 7.41,18.59 5.83,17 21,17 21,15 5.83,15"}),e.React.createElement("polygon",{points:"16.59,10.59 18,12 22,8 18,4 16.59,5.41 18.17,7 3,7 3,9 18.17,9"}))))),W=()=>cumcord.patcher.injectCSS(`.acc-switch-modal{width:650px}.acc-switch-modal .separator-2-RRj_{-webkit-box-shadow:none!important;box-shadow:none!important}.acc-switch-modal .content-1LAB8Z{background-color:var(--background-tertiary);padding:10px 4px 0 10px!important;margin-bottom:20px!important;border-radius:5px;margin:0 10px}.acc-switch-modal .content-1LAB8Z [aria-hidden=true]{display:none}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to{background-color:transparent;margin-bottom:10px;border:none}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account{background-color:var(--background-secondary);-webkit-transition:background-color .25s ease;transition:background-color .25s ease;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:5px;display:-webkit-box;display:-ms-flexbox;display:flex;padding:10px}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details .accountName{color:var(--text-normal);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;font-size:large;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details .accountName [aria-label=Edit]{position:relative;margin-left:5px;top:1px}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details .Token{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details .Token .tokenValue{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important;background-color:var(--background-secondary-alt);color:var(--background-secondary-alt);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;border-radius:5px;font-size:12px;margin-left:5px;padding:3px}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-details .Token .tokenValue.reveal{background-color:transparent;color:var(--text-normal);cursor:pointer}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-buttons{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;right:0px;top:5px}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-buttons button{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 5px;height:30px;padding:0}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account .account-buttons button:hover{background-color:#b13234}.acc-switch-modal .content-1LAB8Z .cardPrimary-1Hv-to .account img{margin-right:13px;border-radius:5%;height:60px}.acc-switch-modal .content-1LAB8Z .selected-account{background-color:var(--background-accent)!important}.acc-switch-modal .footer-2gL1pp .lookFilled-1Gx00P.colorBrand-3pXr91:nth-child(2){position:absolute;left:15px}.acc-switch-modal .footer-2gL1pp .lookFilled-1Gx00P.colorGrey-2DXtkV{cursor:not-allowed}.switch-acc-button polygon{fill:var(--interactive-normal)}
`);const E={...a.webpack.findByProps("iconWrapper","clickable")};let m,v;const q=a.webpack.findByDisplayName("HeaderBarContainer");var G=({persist:t})=>(t.ghost.accounts||(t.store.accounts=[]),{onLoad(){v=W(),m=A.after("renderLoggedIn",q.prototype,(s,n)=>{const c=e.React.createElement(w,{text:"Switch Accounts",position:"bottom"},e.React.createElement("div",{className:["switch-acc-button",E.iconWrapper,E.clickable].join(" ")},e.React.createElement(V,{onClick:()=>b(()=>e.React.createElement(I,{persist:t}))})));return n.props.toolbar?n.props.toolbar.props.children.push(c):n.props.toolbar=c,n})},onUnload(){m?.(),v?.()}});return G})(cumcord.modules,cumcord.modules.common,cumcord.patcher,cumcord.utils);
