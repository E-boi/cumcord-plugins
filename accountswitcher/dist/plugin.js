(function(a,e,N,B,u){"use strict";const R=a.webpack.findByProps("TooltipContainer").TooltipContainer,w=a.webpack.findByProps("openModalLazy");let f;const k=async t=>f=w.openModal(l=>(t.props={...t.props,...l},t)),P=()=>w.closeModal(f),i=a.webpack.findByProps("ModalRoot"),g=a.webpack.findByDisplayName("FormTitle"),h=a.webpack.findByDisplayName("Card"),o=a.webpack.find(t=>t.DropdownSizes),y=a.webpack.findByDisplayName("Text"),_=a.webpack.findByDisplayName("Pencil"),m={dividerDefault:a.webpack.findByProps("dividerDefault").dividerDefault,divider:a.webpack.find(t=>t.divider?.includes("divider-_")).divider};var M=({className:t})=>e.React.createElement("div",{className:`${m.divider} ${m.dividerDefault} ${t}`});const A=a.webpack.findByDisplayName("FormItem"),S=a.webpack.findByDisplayName("FormText"),d={...a.webpack.findByProps("marginBottom20"),...a.webpack.findByProps("formText"),...a.webpack.findByDisplayName("Flex")};var G=t=>e.React.createElement(A,{title:t.title,required:t.required,className:`${d.Direction.VERTICAL} ${d.Justify.START} ${d.Align.STRETCH} ${d.Wrap.NO_WRAP} ${d.marginBottom20}`},t.children,t.note&&e.React.createElement(S,{className:`${d.description} ${d.marginTop8}`},t.note),e.React.createElement(M,{className:[d.marginTop20].join(" ")}));const q=a.webpack.findByDisplayName("TextInput");var x=t=>{const l=t.children;return delete t.children,e.React.createElement(G,{title:l,required:t.required,note:t.note},e.React.createElement(q,{...t}))},Z=({account:t,onClose:l,transitionState:s})=>{const[n,r]=e.React.useState(t);return e.React.createElement(i.ModalRoot,{transitionState:s,className:"acc-switch-modal"},e.React.createElement(i.ModalHeader,null,e.React.createElement(g,{tag:"h3"},"Add Account")),e.React.createElement(i.ModalContent,null,e.React.createElement(h,null,e.React.createElement(x,{value:n.name,onChange:c=>r({...n,name:c})},"Name:"),e.React.createElement(x,{value:n.pfp,onChange:c=>r({...n,pfp:c})},"Profile:"),e.React.createElement(x,{value:n.token,onChange:c=>r({...n,token:c})},"Token:"))),e.React.createElement(i.ModalFooter,null,e.React.createElement(o,{onClick:()=>{u.persist.store.accounts.push(n),l()}},"Save"),e.React.createElement(o,{onClick:l},"Back")))},$=({account:t,idx:l,onClose:s,transitionState:n})=>{const[r,c]=e.React.useState(t);return e.React.createElement(i.ModalRoot,{transitionState:n,className:"acc-switch-modal"},e.React.createElement(i.ModalHeader,null,e.React.createElement(g,{tag:"h3"},"Edit Account")),e.React.createElement(i.ModalContent,null,e.React.createElement(h,null,e.React.createElement(x,{value:r.name,onChange:p=>c({...r,name:p})},"Name:"),e.React.createElement(x,{value:r.pfp,onChange:p=>c({...r,pfp:p})},"Profile:"),e.React.createElement(x,{value:r.token,onChange:p=>c({...r,token:p})},"Token:"))),e.React.createElement(i.ModalFooter,null,e.React.createElement(o,{onClick:()=>{u.persist.store.accounts[l]=r,s()}},"Save"),e.React.createElement(o,{onClick:s},"Back")))};const{getCurrentUser:K}=a.webpack.findByProps("getCurrentUser"),{getToken:E}=a.webpack.findByProps("getToken"),{loginToken:D}=a.webpack.findByProps("loginToken");var F=({transitionState:t})=>{const[l,s]=e.React.useState({}),[n,r]=e.React.useState();return B.useNest(u.persist),e.React.createElement(i.ModalRoot,{transitionState:t,className:"acc-switch-modal"},e.React.createElement(i.ModalHeader,null,e.React.createElement(g,{tag:"h3"},"Accounts")),e.React.createElement(i.ModalContent,null,u.persist.ghost.accounts?.map((c,p)=>e.React.createElement(h,null,e.React.createElement("div",{className:`account ${n===c.token&&"selected-account"}`,onClick:b=>{b.target.type=="button"||b.target.nodeName==="svg"||b.target.nodeName==="path"||b.target.parentElement.className==="Token"||r(c.token)}},e.React.createElement("img",{src:c.pfp}),e.React.createElement("div",{className:"account-details"},e.React.createElement("div",{className:"accountName"},c.name,e.React.createElement(R,{text:"Edit",position:"top"},e.React.createElement(_,{className:"pencilsvg",onClick:()=>k(e.React.createElement($,{account:c,idx:p,persist:u.persist}))}))),e.React.createElement("div",{className:"Token"},e.React.createElement(y,{className:"tokenText"},"Token:"),e.React.createElement(y,{className:`tokenValue ${l[c.token]&&"reveal"}`,onClick:()=>s({...l,[c.token]:!l[c.token]})},c.token))),e.React.createElement("div",{className:"account-buttons"},e.React.createElement(o,{onClick:()=>{u.persist.ghost.accounts.splice(p,1),r(c.token),setTimeout(()=>r(null))},color:o.Colors.RED,size:o.Sizes.SMALL},"X")))))),e.React.createElement(i.ModalFooter,null,e.React.createElement(o,{color:n?o.Colors.BRAND:o.Colors.GREY,onClick:()=>z(n)},"Switch"),e.React.createElement(o,{onClick:()=>k(e.React.createElement(Z,{account:I(),persist:u.persist}))},"Add account")))};function I(){const t=K();return{name:t.tag,token:E(),pfp:t.getAvatarURL()}}function z(t){!t||E()!==t&&(P(),D(t))}var L=e.React.memo(t=>e.React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",...t},e.React.createElement("g",null,e.React.createElement("rect",{fill:"none",height:"24",width:"24",x:"0"})),e.React.createElement("g",null,e.React.createElement("g",null,e.React.createElement("polygon",{points:"7.41,13.41 6,12 2,16 6,20 7.41,18.59 5.83,17 21,17 21,15 5.83,15"}),e.React.createElement("polygon",{points:"16.59,10.59 18,12 22,8 18,4 16.59,5.41 18.17,7 3,7 3,9 18.17,9"}))))),j=()=>cumcord.patcher.injectCSS(".acc-switch-modal{width:650px}.acc-switch-modal .separator-2lLxgC{-webkit-box-shadow:none!important;box-shadow:none!important}.acc-switch-modal .content-2hZxGK{background-color:var(--background-tertiary);padding:10px 4px 0 10px!important;margin-bottom:20px!important;border-radius:5px;margin:0 10px}.acc-switch-modal .content-2hZxGK [aria-hidden=true]{display:none}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__{background-color:transparent;margin-bottom:10px;border:none}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account{background-color:var(--background-secondary);-webkit-transition:background-color .25s ease;transition:background-color .25s ease;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-radius:5px;display:-webkit-box;display:-ms-flexbox;display:flex;padding:10px}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details .accountName{color:var(--text-normal);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;font-size:large;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details .accountName [aria-label=Edit]{position:relative;margin-left:5px;top:1px}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details .Token{-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;display:-webkit-box;display:-ms-flexbox;display:flex}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details .Token .tokenValue{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important;background-color:var(--background-secondary-alt);color:var(--background-secondary-alt);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;border-radius:5px;font-size:12px;margin-left:5px;padding:3px}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-details .Token .tokenValue.reveal{background-color:transparent;color:var(--text-normal);cursor:pointer}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-buttons{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;right:0px;top:5px}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-buttons button{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 5px;height:30px;padding:0}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account .account-buttons button:hover{background-color:#b13234}.acc-switch-modal .content-2hZxGK .cardPrimary-3qRT__ .account img{margin-right:13px;border-radius:5%;height:60px}.acc-switch-modal .content-2hZxGK .selected-account{background-color:var(--background-accent)!important}.acc-switch-modal .footer-31IekZ .lookFilled-yCfaCM.colorBrand-I6CyqQ:nth-child(2){position:absolute;left:15px}.acc-switch-modal .footer-31IekZ .lookFilled-yCfaCM.colorGrey-2iAG-B{cursor:not-allowed}.switch-acc-button polygon{fill:var(--interactive-normal)}");const v={...a.webpack.findByProps("iconWrapper","clickable")};let T,C;const H=a.webpack.findByDisplayName("HeaderBarContainer");var U=({persist:t})=>(t.ghost.accounts||(t.store.accounts=[]),{onLoad(){C=j(),T=N.after("renderLoggedIn",H.prototype,(l,s)=>{const n=e.React.createElement(R,{text:"Switch Accounts",position:"bottom"},e.React.createElement("div",{className:["switch-acc-button",v.iconWrapper,v.clickable].join(" ")},e.React.createElement(L,{onClick:()=>k(e.React.createElement(F))})));return s.props.toolbar?s.props.toolbar.props.children.push(n):s.props.toolbar=n,s})},onUnload(){T?.(),C?.()}});return U})(cumcord.modules,cumcord.modules.common,cumcord.patcher,cumcord.utils,cumcord.pluginData);
