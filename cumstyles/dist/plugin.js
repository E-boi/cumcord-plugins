(function(n,v,c){"use strict";const u=()=>Math.random().toString(16).substring(2);async function o(e,t){const a=await fetch(e);if(!a.ok)return;const d=a.clone(),{type:k}=await a.blob();if(k!=="text/plain")return;const p=t||u(),s=document.createElement("style");return s.className=`CUMCORD_INJECTED_THEME theme-${p}`,s.appendChild(document.createTextNode(await d.text())),document.head.appendChild(s),{[p]:e}}function E(e){Object.entries(e).filter(t=>t).forEach(t=>t[1].applied&&o(t[1].url,t[0]))}function h(e,t){const a=u();return e.themes[a]={url:t,applied:!1},{[a]:t}}function y(){document.querySelectorAll(".CUMCORD_INJECTED_THEME").forEach(t=>t.remove())}function i(e){document.querySelector(`.theme-${e}`)?.remove()}const m={divider:c.webpack.findByPropsAll("divider")[1].divider,dividerDefault:c.webpack.findByProps("dividerDefault").dividerDefault};var R=({className:e})=>n.React.createElement("div",{className:`${m.divider} ${m.dividerDefault} ${e}`});const T=c.webpack.findByDisplayName("TextInput"),C=c.webpack.findByDisplayName("FormItem"),l={...c.webpack.findByProps("marginBottom20")};var b=e=>{const t=[e.children];return delete e.children,n.React.createElement(C,{title:e.title,required:e.required,className:l.marginBottom20},n.React.createElement("div",{className:"cumstyles-textinput"},n.React.createElement(T,{...e}),t),n.React.createElement(R,{className:[l.marginTop20,l.marginBottom20].join(" ")}))};const r=c.webpack.find(e=>e.DropdownSizes);var g=({persist:e})=>(v.useNest(e),n.React.createElement("div",null,Object.entries(e.ghost.themes||{}).filter(t=>t).map((t,a)=>n.React.createElement(b,{title:`Theme ${++a}`,onChange:d=>e.store.themes[t[0]].url=d,value:t[1].url},n.React.createElement(r,{onClick:()=>{!t[1]?.url||(i(t[0]),o(t[1].url,t[0]),t[1].applied=!0)}},"Apply"),n.React.createElement(r,{onClick:()=>i(t[0])},"Disable"),n.React.createElement(r,{onClick:()=>{i(t[0]),delete e.store.themes[t[0]]}},"Remove"))),n.React.createElement(r,{onClick:()=>h(e.store)},"Add Theme"))),x=()=>cumcord.patcher.injectCSS(`.cumstyles-textinput{display:flex}.cumstyles-textinput>div{flex:auto}.cumstyles-textinput button{margin-left:10px}
`);let f;var D=({persist:e})=>({onLoad(){f=x(),e.ghost.themes&&E(e.ghost.themes)},onUnload(){f?.(),y()},settings:n.React.createElement(g,{persist:e})});return D})(cumcord.modules.common,cumcord.utils,cumcord.modules);
