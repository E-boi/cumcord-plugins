(function(b,H,p,V,r,Z,o,g,J){"use strict";function K(e){if(e&&e.__esModule)return e;var s=Object.create(null);return e&&Object.keys(e).forEach(function(a){if(a!=="default"){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}}),s.default=e,Object.freeze(s)}var t=K(H);const Q=o.findByDisplayName("TextInput"),I=o.findByDisplayName("SwitchItem"),P=o.findByDisplayName("Text")||o.findByDisplayName("LegacyText"),j=o.findByProps("Sizes","Tags"),X=o.findByDisplayName("UserActivityContainer"),$=o.findByDisplayName("FormItem"),D=o.findByDisplayName("ArrowDropDown"),ee=o.findByDisplayName("ArrowDropUp"),M=o.findByDisplayName("SelectTempWrapper"),y=o.find(e=>e.DropdownSizes),c=o.findByDisplayName("Flex"),{ScrollerThin:te}=o.findByProps("ScrollerThin"),re=o.findByDisplayName("SlideIn"),se=o.findByDisplayName("SettingsNotice"),ne=o.findByDisplayName("TransitionGroup"),C=o.findByProps("ModalRoot"),ae=o.findByProps("openModalLazy"),O=e=>ae.openModal(s=>(e.props={...e.props,...s},e)),ie=p.webpack.findByProps("dividerDefault").dividerDefault,oe=p.webpack.findByDisplayName("FormDivider");var w=({className:e})=>t.createElement(oe,{className:[ie,e].join(" ")});const N={...p.webpack.findByProps("marginBottom20")};var S=e=>{Array.isArray(e.children)||(e.children=[e.children]);const s=e.children[0];e.children.splice(0,1);const a=e.children.map(n=>n&&t.createElement(c.Child,{className:"crpc-lowerMargin",grow:0,shrink:0,wrap:!0},n));return delete e.children,t.createElement($,{title:s,className:N.marginBottom20,required:e.required},a.length?t.createElement(c,null,t.createElement(c.Child,{grow:1,shrink:1,wrap:!0},t.createElement(M,{...e})),[...a]):t.createElement(M,{...e}),!e.noDivider&&t.createElement(w,{className:[N.marginTop20,N.marginBottom20].join(" ")}))};const x={...p.webpack.findByProps("marginBottom20")};var h=e=>{const s=e.children;return delete e.children,t.createElement($,{title:s,required:e.required,className:x.marginBottom20},t.createElement(Q,{...e}),!e.noDivider&&t.createElement(w,{className:[x.marginTop20,x.marginBottom20].join(" ")}))};const u={...p.webpack.findByProps("wrapper","base"),...p.webpack.findByProps("flex"),...p.webpack.findByProps("size20"),...p.webpack.findByProps("marginBottom20"),...p.webpack.findByProps("dividerDefault")};var W=({opened:e,children:s,title:a,onChange:n})=>(Array.isArray(s)||(s=[s]),t.createElement("div",null,t.createElement("div",{onClick:()=>n?.(),className:[u.flex,u.alignCenter,u.marginBottom8].join(" ")},e?t.createElement(ee,{className:u.base,width:32,height:32}):t.createElement(D,{className:u.base,width:32,height:32}),t.createElement(P,{className:[u.base,u.size16,u.marginLeft8].join(" ")},a)),e?t.createElement("div",{className:[u.marginLeft8,u.marginBottom20].join(" ")},[...s]):null,!e&&t.createElement(w,{className:u.marginBottom20})));const L=o.findByProps("getActivities"),{useStateFromStores:le}=o.findByProps("useStateFromStores");var U=({user:e})=>{const s=le([L],()=>L.getActivities(e.id));return t.createElement(te,{className:"userProfileScroll-crpc"},s.map(a=>t.createElement(X,{type:"Profile",activity:a,user:e,source:"Profile Modal",className:["userProfile-crpc","newProfileActivityStyles"].join(" ")},a.application_id," - ",a.session_id," - ",a.name)))};const{noticeRegion:ce}=o.findByProps("noticeRegion");var me=({onReset:e,onSave:s})=>t.createElement(ne,null,t.createElement(re,{className:[ce,"crpc-notice"].join(" ")},t.createElement(se,{onReset:e,onSave:s,theme:"dark"})));const{ActionTypes:de}=b.constants,{getAssetIds:pe,getAssets:ue}=o.findByProps("getAssetIds");function he(){if(r.persist.ghost.converted)return;const e=Object.entries(r.persist.ghost),s=e.map(n=>{if(n[0]==="selected"||n[0]==="disable")return;const m=n[1];return m.buttons=[],m.button1&&m.buttons.push(m.button1),m.button2&&m.buttons.push(m.button2),m}).filter(n=>n),a=e.findIndex(n=>n[0]===e[3][1]);r.persist.store.rpc1=null,r.persist.store.rpc2=null,r.persist.store.rpc3=null,r.persist.store.rpcs=s,r.persist.store.selected=a,r.persist.store.disabled=r.persist.ghost.disable,r.persist.store.converted=!0}async function E(e){const s=e&&await ge(e);b.FluxDispatcher.dispatch({type:de.LOCAL_ACTIVITY_UPDATE,socketId:"cumcord-epic-sex",pid:69,activity:s})}async function ge(e){const s=await pe(e.client_id,[e.large_image,e.small_image]),a={application_id:e.client_id,name:e.name,details:e.details,state:e.state,assets:{large_image:s[0],small_image:s[1],large_text:e.large_text,small_text:e.small_text},timestamps:e.show_time&&{start:Date.now()},buttons:[],metadata:{button_uris:[]},type:e.type,url:e.url};return e.buttons?.forEach(n=>{n?.url&&n?.label&&(a.buttons.push(n.label),a.metadata.button_uris.push(n.url))}),a}async function fe(e){const s=await ue(e),a=Object.values(s).filter(n=>n.type===1);return a.unshift({name:"",type:1}),a.filter(n=>n.type===1).map(n=>({label:n.name,value:n.name}))}const F={show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum",buttons:[{label:"",url:""},{label:"",url:""}],type:0},{getCurrentUser:ye}=o.findByProps("getCurrentUser"),A={...o.findByProps("h5"),...o.findByProps("marginBottom20")},v=({children:e,grow:s,shrink:a,wrap:n})=>(Array.isArray(e)||(e=[e]),e.map(m=>t.createElement(c.Child,{wrap:n,grow:s||1,shrink:a||1},m)));var k=({rpcName:e,transitionState:s,onClose:a})=>{const[n,m]=g.useState(),[q,Y]=g.useState(),[Pe,G]=g.useState(),[B,we]=g.useState(),[i,Ne]=g.useState(Object.assign({},r.persist.ghost.rpcs[e]));g.useEffect(()=>{i.buttons=i.buttons.map(l=>({label:l.label,url:l.url}))});const d=l=>{const f=l||i;Ne(Object.assign({},f)),_.isEqual(Object.assign({},r.persist.ghost.rpcs[e]),f)?G(!1):G(!0)};return B||fe(i.client_id).then(l=>we(l)).catch(()=>{}),t.createElement(C.ModalRoot,{className:"crpc-edit",transitionState:s},t.createElement(C.ModalHeader,{separator:!1},t.createElement(v,null,t.createElement(j,{size:j.Sizes.SIZE_20,tag:"h2"},"Edit RPC"),t.createElement(C.ModalCloseButton,{onClick:a}))),t.createElement(C.ModalContent,null,t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(c.Child,{wrap:!0},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(v,{wrap:!0,grow:0,shrink:0},t.createElement(h,{required:!0,noDivider:!0,value:i.client_id,onChange:l=>{i.client_id=l,d()}},"Client id"),t.createElement(h,{noDivider:!0,value:i.name,onChange:l=>{i.name=l,d()}},"Name"),t.createElement(h,{noDivider:!0,value:i.details,onChange:l=>{i.details=l,d()}},"Details"),t.createElement(h,{noDivider:!0,value:i.state,onChange:l=>{i.state=l,d()}},"State")),t.createElement(c.Child,null,t.createElement(I,{value:i.show_time,onChange:()=>{i.show_time=!i.show_time,d()}},"Show Time"),t.createElement(W,{title:"Images",opened:q,onChange:()=>!Y(!q)&&m(!1)},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(v,{wrap:!0,grow:1,shrink:1},B&&t.createElement(S,{value:i.large_image,options:B,onChange:l=>{i.large_image=l.value,d()}},"Large Image"),t.createElement(h,{value:i.large_text,onChange:l=>{i.large_text=l,d()}},"Large Image Text"))),t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(v,{wrap:!0,grow:1,shrink:1},B&&t.createElement(S,{value:i.small_image,options:B,onChange:l=>{i.small_image=l.value,d()}},"Small Image"),t.createElement(h,{value:i.small_text,onChange:l=>{i.small_text=l,d()}},"Small Image Text")))),t.createElement(W,{title:"Buttons",opened:n,onChange:()=>!m(!n)&&Y(!1)},i.buttons.map((l,f)=>t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(v,{wrap:!0,grow:1,shrink:1},t.createElement(h,{value:l.url,placeholder:"https://",onChange:T=>{i.buttons[f].url=T,d()}},"Button ",f+1," URL"),t.createElement(h,{value:l.label,onChange:T=>{i.buttons[f].label=T,d()}},"Button ",f+1," Text"))))),t.createElement(P,{className:`${A.h5} ${A.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:A.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(U,{user:ye()})))))),Pe&&t.createElement(me,{onReset:()=>{d(r.persist.ghost.rpcs[e])},onSave:()=>{r.persist.store.rpcs[e]=i,d(),r.persist.ghost.selected===e&&E(i)}})))};const{getCurrentUser:Ee}=p.webpack.findByProps("getCurrentUser"),R={...p.webpack.findByProps("h5"),...p.webpack.findByProps("marginBottom20")};var ve=()=>{V.useNest(r.persist);const[e,s]=g.useState(r.persist.ghost.selected);return t.createElement("div",null,t.createElement(I,{value:r.persist.ghost.disabled,onChange:()=>{r.persist.store.disabled=!r.persist.ghost.disabled,E(r.persist.ghost.disabled?null:r.persist.ghost.rpcs[e])}},"Disabled"),t.createElement(S,{value:e,onChange:a=>s(a.value),options:r.persist.ghost.rpcs.map((a,n)=>({label:a.name,value:n}))},"RPC'S",!isNaN(e)&&r.persist.ghost.selected!==e&&t.createElement(y,{disabled:r.persist.ghost.selected===e,onClick:()=>{r.persist.store.selected=e,r.persist.ghost.disabled||E(r.persist.ghost.rpcs[e])}},"Set as RPC"),e!==null&&t.createElement(y,{onClick:()=>O(t.createElement(k,{rpcName:e}))},"Edit RPC"),t.createElement(y,{onClick:()=>{r.persist.store.rpcs.push(F),s(r.persist.ghost.rpcs.length-1),O(t.createElement(k,{rpcName:r.persist.ghost.rpcs.length-1}))}},"Create new RPC"),t.createElement(y,{color:y.Colors.RED,onClick:()=>Z.showConfirmationModal({confirmText:"Delete",content:"Are you sure you want to delete that rpc?",type:"danger"},a=>{!a||(r.persist.store.rpcs.splice(e,1),r.persist.store.selected=null,s(null))})},"Delete RPC")),t.createElement(P,{className:`${R.h5} ${R.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:R.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(U,{user:Ee()})))},Be=()=>J.injectCSS(".rpcsetting-select{display:flex}.rpcsetting-select .select-1YfRS9{width:-webkit-fill-available}.rpcsetting-select button{margin-left:9px}.userProfileScroll-crpc{padding:8px 0;height:100%}.userProfile-crpc{position:relative;padding:16px}.crpc-edit{width:800px}.crpc-notice{position:fixed}.crpc-lowerMargin{margin-left:5px;margin-right:5px}");let z;function Ce(){r.persist.store.rpcs=[],r.persist.store.rpcs.push(F),r.persist.store.selected=0}var be=()=>(!r.persist.ghost.converted&&r.persist.ghost.rpc1?he():r.persist.ghost.rpcs||Ce(),{onLoad(){z=Be(),E(r.persist.ghost.rpcs[r.persist.ghost.selected])},onUnload(){z?.(),E(null)},settings:b.React.createElement(ve)});return be})(cumcord.modules.common,cumcord.modules.common.React,cumcord.modules,cumcord.utils,cumcord.pluginData,cumcord.ui.modals,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.patcher);
