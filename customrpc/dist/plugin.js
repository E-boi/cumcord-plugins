(function(r,T,I,P,A){"use strict";function j(e){if(e&&e.__esModule)return e;var i=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}}),i.default=e,Object.freeze(i)}var t=j(I);const p={Input:r.webpack.findByDisplayName("TextInput"),SwitchItem:r.webpack.findByDisplayName("SwitchItem"),Text:r.webpack.findByDisplayName("Text")||r.webpack.findByDisplayName("LegacyText"),UserPopout:r.webpack.findByDisplayName("UserProfileActivity"),FormItem:r.webpack.findByDisplayName("FormItem"),ArrowDown:r.webpack.findByDisplayName("ArrowDropDown"),ArrowUp:r.webpack.findByDisplayName("ArrowDropUp"),SelectTempWrapper:r.webpack.findByDisplayName("SelectTempWrapper"),Button:r.webpack.find(e=>e.DropdownSizes)},U=p.Input,B=p.SwitchItem,O=p.Text,E=p.FormItem,R=p.ArrowDown,$=p.ArrowUp,C=p.SelectTempWrapper,L=p.Button,x={dividerDefault:r.webpack.findByProps("dividerDefault").dividerDefault,divider:r.webpack.find(e=>e.divider?.includes("divider-_")).divider};var g=({className:e})=>t.createElement("div",{className:`${x.divider} ${x.dividerDefault} ${e}`});const d={...r.webpack.findByProps("marginBottom20")};var m=e=>{const i=e.children;return delete e.children,t.createElement(E,{title:i,required:e.required,className:d.marginBottom20},t.createElement(U,{...e}),t.createElement(g,{className:[d.marginTop20,d.marginBottom20].join(" ")}))};const s={...r.webpack.findByProps("wrapper","base"),...r.webpack.findByProps("flex"),...r.webpack.findByProps("size20"),...r.webpack.findByProps("marginBottom20"),...r.webpack.findByProps("dividerDefault")};var k=({opened:e,children:i,title:n,onChange:l})=>t.createElement("div",null,t.createElement("div",{onClick:()=>l?.(),className:[s.flex,s.alignCenter,s.marginBottom8].join(" ")},e?t.createElement($,{className:s.base,width:32,height:32}):t.createElement(R,{className:s.base,width:32,height:32}),t.createElement(O,{className:[s.base,s.size16,s.marginLeft8].join(" ")},n)),e?t.createElement("div",{className:[s.marginLeft8,s.marginBottom20].join(" ")},[...i]):null,!e&&t.createElement(g,{className:s.marginBottom20}));const b={...r.webpack.findByProps("marginBottom20")};var h=e=>{Array.isArray(e.children)||(e.children=[e.children]);const i=e.children;return delete e.children,t.createElement(E,{title:i[0],className:b.marginBottom20,required:e.required},i[1]?t.createElement("div",{className:"rpcsetting-select"},t.createElement(C,{...e}),i[1]):t.createElement(C,{...e}),t.createElement(g,{className:[b.marginTop20,b.marginBottom20].join(" ")}))};r.webpack.findByProps("getCurrentUser");const{getAssets:q}=r.webpack.findByProps("getAssets");({...r.webpack.findByProps("h5"),...r.webpack.findByProps("marginBottom20")});const z=[{label:"rpc 1",value:"rpc1"},{label:"rpc 2",value:"rpc2"},{label:"rpc 3",value:"rpc3"}];async function w(e){const i=await q(e),n=Object.values(i).filter(l=>l.type===1);return n.unshift({name:""}),n}var F=({persist:e,reloadRPC:i})=>{const[n,l]=t.useState(!1),[N,S]=t.useState(!1),[u,_]=t.useState();P.useNest(e);const c=e.ghost.selected,o=e.ghost[c];return u||w(o.client_id).then(a=>_(a)).catch(()=>{}),t.createElement("div",null,t.createElement(h,{value:c,options:z,onChange:a=>{e.store.selected=a.value,w(e.ghost[a.value].client_id).then(y=>_(y)).catch(()=>{})}},"Rpc Config",t.createElement(L,{onClick:()=>i(e.ghost)},"Save")),t.createElement(B,{value:e.ghost.disable??!1,onChange:()=>{e.store.disable=!e.ghost.disable,i(e.ghost)}},"Disabled"),t.createElement(B,{value:o.show_time??!0,onChange:()=>e.store[c].show_time=!o.show_time},"Show Time"),t.createElement(m,{required:!0,value:o.client_id,onChange:a=>{e.store[c].client_id=a,w(e.ghost[c].client_id).then(y=>_(y)).catch(()=>{})}},"Client ID"),t.createElement(m,{value:o.name,onChange:a=>e.store[c].name=a},"Name"),t.createElement(m,{value:o.details,onChange:a=>e.store[c].details=a},"Details"),t.createElement(m,{value:o.state,onChange:a=>e.store[c].state=a},"State"),t.createElement(k,{title:"Images",opened:n,onChange:()=>{l(!n),S(!1)}},u&&t.createElement(h,{value:o.large_image,options:u.map(a=>({label:a.name,value:a.name})),onChange:a=>e.store[c].large_image=a.value},"Large Image"),u&&t.createElement(h,{value:o.small_image??"",options:u.map(a=>({label:a.name,value:a.name})),onChange:a=>e.store[c].small_image=a.value},"Small Image"),t.createElement(m,{value:o.large_text,onChange:a=>e.store[c].large_text=a},"Large Image Tooltip"),t.createElement(m,{value:o.small_text,onChange:a=>e.store[c].small_text=a},"Small Image Tooltip")),t.createElement(k,{title:"Buttons",opened:N,onChange:()=>{S(!N),l(!1)}},t.createElement(m,{value:o.button1?.label??"",onChange:a=>e.store[c].button1.label=a},"Button 1 Text"),t.createElement(m,{value:o.button1?.url??"",onChange:a=>e.store[c].button1.url=a},"Button 1 Url"),t.createElement(m,{value:o.button2?.label??"",onChange:a=>e.store[c].button2.label=a},"Button 2 Text"),t.createElement(m,{value:o.button2?.url??"",onChange:a=>e.store[c].button2.url=a},"Button 2 Url")))},W=()=>A.injectCSS(".rpcsetting-select{display:flex}.rpcsetting-select .select-1YfRS9{width:-webkit-fill-available}.rpcsetting-select button{margin-left:9px}");const{SET_ACTIVITY:{handler:v}}=r.webpack.findByProps("SET_ACTIVITY");let D;const Y={rpc1:{show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum"},rpc2:{show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum"},rpc3:{show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum"},selected:"rpc1"};function V(e){Object.entries(Y).forEach(i=>e[i[0]]=i[1])}function f(e,i=!1){const n=e.selected,l={isSocketConnected:()=>!0,socket:{id:420,application:{id:e[n].client_id,name:e[n].name},transport:"ipc"},args:{pid:69,activity:i||e.disable?null:{details:e[n].details,state:e[n].state,assets:{large_image:e[n].large_image,small_image:e[n].small_image,large_text:e[n].large_text,small_text:e[n].small_text},timestamps:e[n].show_time&&{start:Date.now()}}}};return e[n].button1?.url&&e[n].button1?.label&&l.args.activity&&(l.args.activity.buttons?.push(e[n].button1)||(l.args.activity.buttons=[e[n].button1])),e[n].button2?.url&&e[n].button2?.label&&l.args.activity&&(l.args.activity.buttons?.push(e[n].button2)||(l.args.activity.buttons=[e[n].button2])),l}var M=({persist:e})=>(e.ghost.rpc1||V(e.store),{onLoad(){D=W(),v(f(e.ghost))},onUnload(){D?.(),v(f(e.ghost,!0))},settings:T.React.createElement(F,{persist:e,reloadRPC:i=>v(f(i))})});return M})(cumcord.modules,cumcord.modules.common,cumcord.modules.common.React,cumcord.utils,cumcord.patcher);
