(function(m,P,G,H,n,V,l,g,Z){"use strict";function J(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}}),r.default=e,Object.freeze(r)}var t=J(G);const K=l.findByDisplayName("TextInput"),I=l.findByDisplayName("SwitchItem"),w=l.findByDisplayName("Text")||l.findByDisplayName("LegacyText"),j=l.findByProps("Sizes","Tags"),Q=l.findByDisplayName("UserActivityContainer"),$=l.findByDisplayName("FormItem"),X=l.findByDisplayName("ArrowDropDown"),ee=l.findByDisplayName("ArrowDropUp"),M=l.findByDisplayName("SelectTempWrapper"),f=l.find(e=>e.DropdownSizes),c=l.findByDisplayName("Flex"),{ScrollerThin:te}=l.findByProps("ScrollerThin"),re=l.findByDisplayName("SlideIn"),se=l.findByDisplayName("SettingsNotice"),ne=l.findByDisplayName("TransitionGroup"),B=l.findByProps("ModalRoot"),ae=l.findByProps("openModalLazy"),W=e=>ae.openModal(r=>(e.props={...e.props,...r},e)),ie=m.webpack.findByProps("dividerDefault").dividerDefault,le=m.webpack.findByDisplayName("FormDivider");var N=({className:e})=>t.createElement(le,{className:[ie,e].join(" ")});const S={...m.webpack.findByProps("marginBottom20")};var b=e=>{Array.isArray(e.children)||(e.children=[e.children]);const r=e.children[0];e.children.splice(0,1);const s=e.children.map(i=>i&&t.createElement(c.Child,{className:"crpc-lowerMargin",grow:0,shrink:0,wrap:!0},i));return delete e.children,t.createElement($,{title:r,className:S.marginBottom20,required:e.required},s.length?t.createElement(c,null,t.createElement(c.Child,{grow:1,shrink:1,wrap:!0},t.createElement(M,{...e})),[...s]):t.createElement(M,{...e}),!e.noDivider&&t.createElement(N,{className:[S.marginTop20,S.marginBottom20].join(" ")}))};const x={...m.webpack.findByProps("marginBottom20")};var u=e=>{const r=e.children;return delete e.children,t.createElement($,{title:r,required:e.required,className:x.marginBottom20},t.createElement(K,{...e}),!e.noDivider&&t.createElement(N,{className:[x.marginTop20,x.marginBottom20].join(" ")}))};const p={...m.webpack.findByProps("wrapper","base"),...m.webpack.findByProps("flex"),...m.webpack.findByProps("size20"),...m.webpack.findByProps("marginBottom20"),...m.webpack.findByProps("dividerDefault")};var O=({opened:e,children:r,title:s,onChange:i})=>(Array.isArray(r)||(r=[r]),t.createElement("div",null,t.createElement("div",{onClick:()=>i?.(),className:[p.flex,p.alignCenter,p.marginBottom8].join(" ")},e?t.createElement(ee,{className:p.base,width:32,height:32}):t.createElement(X,{className:p.base,width:32,height:32}),t.createElement(w,{className:[p.base,p.size16,p.marginLeft8].join(" ")},s)),e?t.createElement("div",{className:[p.marginLeft8,p.marginBottom20].join(" ")},[...r]):null,!e&&t.createElement(N,{className:p.marginBottom20})));const D=l.findByProps("getActivities"),{useStateFromStores:oe}=l.findByProps("useStateFromStores");var L=({user:e})=>{const r=oe([D],()=>D.getActivities(e.id));return t.createElement(te,{className:"userProfileScroll-crpc"},r.map(s=>t.createElement(Q,{type:"Profile",activity:s,user:e,source:"Profile Modal",className:["userProfile-crpc","newProfileActivityStyles"].join(" ")},s.application_id," - ",s.session_id," - ",s.name)))};const{noticeRegion:ce}=l.findByProps("noticeRegion");var me=({onReset:e,onSave:r})=>t.createElement(ne,null,t.createElement(re,{className:[ce,"crpc-notice"].join(" ")},t.createElement(se,{onReset:e,onSave:r,theme:"dark"})));const{ActionTypes:de}=P.constants,{getAssetIds:pe,getAssets:ue}=l.findByProps("getAssetIds");async function y(e){const r=e&&await ge(e);P.FluxDispatcher.dispatch({type:de.LOCAL_ACTIVITY_UPDATE,socketId:"cumcord-epic-sex",pid:69,activity:r})}async function ge(e){const r=await pe(e.client_id,[e.large_image,e.small_image]),s={application_id:e.client_id,name:e.name,details:e.details,state:e.state,assets:{large_image:r[0],small_image:r[1],large_text:e.large_text,small_text:e.small_text},timestamps:e.show_time&&{start:Date.now()},buttons:[],metadata:{button_uris:[]},type:e.type,url:e.url};return e.buttons?.forEach(i=>{i?.url&&i?.label&&(s.buttons.push(i.label),s.metadata.button_uris.push(i.url))}),s}async function he(e){const r=await ue(e),s=Object.values(r).filter(i=>i.type===1);return s.unshift({name:"",type:1}),s.filter(i=>i.type===1).map(i=>({label:i.name,value:i.name}))}const U={show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum",buttons:[{label:"",url:""},{label:"",url:""}],type:0},{getCurrentUser:fe}=l.findByProps("getCurrentUser"),A={...l.findByProps("h5"),...l.findByProps("marginBottom20")},E=({children:e,grow:r,shrink:s,wrap:i})=>(Array.isArray(e)||(e=[e]),e.map(C=>t.createElement(c.Child,{wrap:i,grow:r||1,shrink:s||1},C)));var k=({rpcName:e,transitionState:r,onClose:s})=>{const[i,C]=g.useState(),[z,q]=g.useState(),[Pe,Y]=g.useState(),[v,we]=g.useState(),[a,_e]=g.useState(Object.assign({},n.persist.ghost.rpcs[e]));g.useEffect(()=>{a.buttons=a.buttons.map(o=>({label:o.label,url:o.url}))});const d=o=>{const h=o||a;_e(Object.assign({},h)),_.isEqual(Object.assign({},n.persist.ghost.rpcs[e]),h)?Y(!1):Y(!0)};return v||he(a.client_id).then(o=>we(o)).catch(()=>{}),t.createElement(B.ModalRoot,{className:"crpc-edit",transitionState:r},t.createElement(B.ModalHeader,{separator:!1},t.createElement(E,null,t.createElement(j,{size:j.Sizes.SIZE_20,tag:"h2"},"Edit RPC"),t.createElement(B.ModalCloseButton,{onClick:s}))),t.createElement(B.ModalContent,null,t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(c.Child,{wrap:!0},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:0,shrink:0},t.createElement(u,{required:!0,noDivider:!0,value:a.client_id,onChange:o=>{a.client_id=o,d()}},"Client id"),t.createElement(u,{noDivider:!0,value:a.name,onChange:o=>{a.name=o,d()}},"Name"),t.createElement(u,{noDivider:!0,value:a.details,onChange:o=>{a.details=o,d()}},"Details"),t.createElement(u,{noDivider:!0,value:a.state,onChange:o=>{a.state=o,d()}},"State")),t.createElement(c.Child,null,t.createElement(I,{value:a.show_time,onChange:()=>{a.show_time=!a.show_time,d()}},"Show Time"),t.createElement(O,{title:"Images",opened:z,onChange:()=>!q(!z)&&C(!1)},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},v&&t.createElement(b,{value:a.large_image,options:v,onChange:o=>{a.large_image=o.value,d()}},"Large Image"),t.createElement(u,{value:a.large_text,onChange:o=>{a.large_text=o,d()}},"Large Image Text"))),t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},v&&t.createElement(b,{value:a.small_image,options:v,onChange:o=>{a.small_image=o.value,d()}},"Small Image"),t.createElement(u,{value:a.small_text,onChange:o=>{a.small_text=o,d()}},"Small Image Text")))),t.createElement(O,{title:"Buttons",opened:i,onChange:()=>!C(!i)&&q(!1)},a.buttons.map((o,h)=>t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},t.createElement(u,{value:o.url,placeholder:"https://",onChange:T=>{a.buttons[h].url=T,d()}},"Button ",h+1," URL"),t.createElement(u,{value:o.label,onChange:T=>{a.buttons[h].label=T,d()}},"Button ",h+1," Text"))))),t.createElement(w,{className:`${A.h5} ${A.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:A.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(L,{user:fe()})))))),Pe&&t.createElement(me,{onReset:()=>{d(n.persist.ghost.rpcs[e])},onSave:()=>{n.persist.store.rpcs[e]=a,d(),n.persist.ghost.selected===e&&y(a)}})))};const{getCurrentUser:ye}=m.webpack.findByProps("getCurrentUser"),R={...m.webpack.findByProps("h5"),...m.webpack.findByProps("marginBottom20")};var Ee=()=>{H.useNest(n.persist);const[e,r]=g.useState(n.persist.ghost.selected);return t.createElement("div",null,t.createElement(I,{value:n.persist.ghost.disabled,onChange:()=>{n.persist.store.disabled=!n.persist.ghost.disabled,y(n.persist.ghost.disabled?null:n.persist.ghost.rpcs[e])}},"Disabled"),t.createElement(b,{value:e,onChange:s=>r(s.value),options:n.persist.ghost.rpcs.map((s,i)=>({label:s.name,value:i}))},"RPC'S",!isNaN(e)&&n.persist.ghost.selected!==e&&t.createElement(f,{disabled:n.persist.ghost.selected===e,onClick:()=>{n.persist.store.selected=e,n.persist.ghost.disabled||y(n.persist.ghost.rpcs[e])}},"Set as RPC"),e!==null&&t.createElement(f,{onClick:()=>W(t.createElement(k,{rpcName:e}))},"Edit RPC"),t.createElement(f,{onClick:()=>{n.persist.store.rpcs.push(U),r(n.persist.ghost.rpcs.length-1),W(t.createElement(k,{rpcName:n.persist.ghost.rpcs.length-1}))}},"Create new RPC"),t.createElement(f,{color:f.Colors.RED,onClick:()=>V.showConfirmationModal({confirmText:"Delete",content:"Are you sure you want to delete that rpc?",type:"danger"},s=>{!s||(n.persist.store.rpcs.splice(e,1),n.persist.store.selected=null,r(null))})},"Delete RPC")),t.createElement(w,{className:`${R.h5} ${R.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:R.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(L,{user:ye()})))},ve=()=>Z.injectCSS(".rpcsetting-select{display:flex}.rpcsetting-select .select-1YfRS9{width:-webkit-fill-available}.rpcsetting-select button{margin-left:9px}.userProfileScroll-crpc{padding:8px 0;height:100%}.userProfile-crpc{position:relative;padding:16px}.crpc-edit{width:800px}.crpc-notice{position:fixed}.crpc-lowerMargin{margin-left:5px;margin-right:5px}");m.webpack.findByProps("SET_ACTIVITY");let F;function Be(){n.persist.store.rpcs=[],n.persist.store.rpcs.push(U),n.persist.store.selected=0}var Ce=()=>(n.persist.ghost.rpc1||Be(),{onLoad(){F=ve(),y(n.persist.ghost.rpcs[n.persist.ghost.selected])},onUnload(){F?.(),y(null)},settings:P.React.createElement(Ee)});return Ce})(cumcord.modules,cumcord.modules.common,cumcord.modules.common.React,cumcord.utils,cumcord.pluginData,cumcord.ui.modals,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.patcher);
