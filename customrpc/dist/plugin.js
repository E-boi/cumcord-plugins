(function(P,G,d,H,r,V,o,g,Z){"use strict";function J(e){if(e&&e.__esModule)return e;var s=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}}),s.default=e,Object.freeze(s)}var t=J(G);const K=o.findByDisplayName("TextInput"),I=o.findByDisplayName("SwitchItem"),w=o.findByDisplayName("Text")||o.findByDisplayName("LegacyText"),j=o.findByProps("Sizes","Tags"),Q=o.findByDisplayName("UserActivityContainer"),$=o.findByDisplayName("FormItem"),X=o.findByDisplayName("ArrowDropDown"),ee=o.findByDisplayName("ArrowDropUp"),M=o.findByDisplayName("SelectTempWrapper"),f=o.find(e=>e.DropdownSizes),c=o.findByDisplayName("Flex"),{ScrollerThin:te}=o.findByProps("ScrollerThin"),re=o.findByDisplayName("SlideIn"),se=o.findByDisplayName("SettingsNotice"),ne=o.findByDisplayName("TransitionGroup"),B=o.findByProps("ModalRoot"),ae=o.findByProps("openModalLazy"),O=e=>ae.openModal(s=>(e.props={...e.props,...s},e)),ie=d.webpack.findByProps("dividerDefault").dividerDefault,oe=d.webpack.findByDisplayName("FormDivider");var N=({className:e})=>t.createElement(oe,{className:[ie,e].join(" ")});const b={...d.webpack.findByProps("marginBottom20")};var S=e=>{Array.isArray(e.children)||(e.children=[e.children]);const s=e.children[0];e.children.splice(0,1);const n=e.children.map(a=>a&&t.createElement(c.Child,{className:"crpc-lowerMargin",grow:0,shrink:0,wrap:!0},a));return delete e.children,t.createElement($,{title:s,className:b.marginBottom20,required:e.required},n.length?t.createElement(c,null,t.createElement(c.Child,{grow:1,shrink:1,wrap:!0},t.createElement(M,{...e})),[...n]):t.createElement(M,{...e}),!e.noDivider&&t.createElement(N,{className:[b.marginTop20,b.marginBottom20].join(" ")}))};const x={...d.webpack.findByProps("marginBottom20")};var u=e=>{const s=e.children;return delete e.children,t.createElement($,{title:s,required:e.required,className:x.marginBottom20},t.createElement(K,{...e}),!e.noDivider&&t.createElement(N,{className:[x.marginTop20,x.marginBottom20].join(" ")}))};const p={...d.webpack.findByProps("wrapper","base"),...d.webpack.findByProps("flex"),...d.webpack.findByProps("size20"),...d.webpack.findByProps("marginBottom20"),...d.webpack.findByProps("dividerDefault")};var W=({opened:e,children:s,title:n,onChange:a})=>(Array.isArray(s)||(s=[s]),t.createElement("div",null,t.createElement("div",{onClick:()=>a?.(),className:[p.flex,p.alignCenter,p.marginBottom8].join(" ")},e?t.createElement(ee,{className:p.base,width:32,height:32}):t.createElement(X,{className:p.base,width:32,height:32}),t.createElement(w,{className:[p.base,p.size16,p.marginLeft8].join(" ")},n)),e?t.createElement("div",{className:[p.marginLeft8,p.marginBottom20].join(" ")},[...s]):null,!e&&t.createElement(N,{className:p.marginBottom20})));const L=o.findByProps("getActivities"),{useStateFromStores:le}=o.findByProps("useStateFromStores");var U=({user:e})=>{const s=le([L],()=>L.getActivities(e.id));return t.createElement(te,{className:"userProfileScroll-crpc"},s.map(n=>t.createElement(Q,{type:"Profile",activity:n,user:e,source:"Profile Modal",className:["userProfile-crpc","newProfileActivityStyles"].join(" ")},n.application_id," - ",n.session_id," - ",n.name)))};const{noticeRegion:ce}=o.findByProps("noticeRegion");var me=({onReset:e,onSave:s})=>t.createElement(ne,null,t.createElement(re,{className:[ce,"crpc-notice"].join(" ")},t.createElement(se,{onReset:e,onSave:s,theme:"dark"})));const{ActionTypes:de}=P.constants,{getAssetIds:pe,getAssets:ue}=o.findByProps("getAssetIds");function ge(){if(r.persist.ghost.rpcs)return;const e=Object.entries(r.persist.ghost),s=e.map(a=>a[0]==="selected"?void 0:a[1]).filter(a=>a),n=e.findIndex(a=>a[0]===e[3][1]);r.persist.store.rpcs=s,r.persist.store.selected=n,r.persist.store.disabled=r.persist.ghost.disable}async function y(e){const s=e&&await he(e);P.FluxDispatcher.dispatch({type:de.LOCAL_ACTIVITY_UPDATE,socketId:"cumcord-epic-sex",pid:69,activity:s})}async function he(e){const s=await pe(e.client_id,[e.large_image,e.small_image]),n={application_id:e.client_id,name:e.name,details:e.details,state:e.state,assets:{large_image:s[0],small_image:s[1],large_text:e.large_text,small_text:e.small_text},timestamps:e.show_time&&{start:Date.now()},buttons:[],metadata:{button_uris:[]},type:e.type,url:e.url};return e.buttons?.forEach(a=>{a?.url&&a?.label&&(n.buttons.push(a.label),n.metadata.button_uris.push(a.url))}),n}async function fe(e){const s=await ue(e),n=Object.values(s).filter(a=>a.type===1);return n.unshift({name:"",type:1}),n.filter(a=>a.type===1).map(a=>({label:a.name,value:a.name}))}const F={show_time:!0,client_id:"892203377503658064",name:"cum",state:"eating cum",details:"Browsing cum",large_image:"cumcord",small_image:"cumcord",large_text:"cuming",small_text:"made with cum",buttons:[{label:"",url:""},{label:"",url:""}],type:0},{getCurrentUser:ye}=o.findByProps("getCurrentUser"),A={...o.findByProps("h5"),...o.findByProps("marginBottom20")},E=({children:e,grow:s,shrink:n,wrap:a})=>(Array.isArray(e)||(e=[e]),e.map(C=>t.createElement(c.Child,{wrap:a,grow:s||1,shrink:n||1},C)));var k=({rpcName:e,transitionState:s,onClose:n})=>{const[a,C]=g.useState(),[q,Y]=g.useState(),[we,D]=g.useState(),[v,Ne]=g.useState(),[i,_e]=g.useState(Object.assign({},r.persist.ghost.rpcs[e]));g.useEffect(()=>{i.buttons=i.buttons.map(l=>({label:l.label,url:l.url}))});const m=l=>{const h=l||i;_e(Object.assign({},h)),_.isEqual(Object.assign({},r.persist.ghost.rpcs[e]),h)?D(!1):D(!0)};return v||fe(i.client_id).then(l=>Ne(l)).catch(()=>{}),t.createElement(B.ModalRoot,{className:"crpc-edit",transitionState:s},t.createElement(B.ModalHeader,{separator:!1},t.createElement(E,null,t.createElement(j,{size:j.Sizes.SIZE_20,tag:"h2"},"Edit RPC"),t.createElement(B.ModalCloseButton,{onClick:n}))),t.createElement(B.ModalContent,null,t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(c.Child,{wrap:!0},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:0,shrink:0},t.createElement(u,{required:!0,noDivider:!0,value:i.client_id,onChange:l=>{i.client_id=l,m()}},"Client id"),t.createElement(u,{noDivider:!0,value:i.name,onChange:l=>{i.name=l,m()}},"Name"),t.createElement(u,{noDivider:!0,value:i.details,onChange:l=>{i.details=l,m()}},"Details"),t.createElement(u,{noDivider:!0,value:i.state,onChange:l=>{i.state=l,m()}},"State")),t.createElement(c.Child,null,t.createElement(I,{value:i.show_time,onChange:()=>{i.show_time=!i.show_time,m()}},"Show Time"),t.createElement(W,{title:"Images",opened:q,onChange:()=>!Y(!q)&&C(!1)},t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},v&&t.createElement(S,{value:i.large_image,options:v,onChange:l=>{i.large_image=l.value,m()}},"Large Image"),t.createElement(u,{value:i.large_text,onChange:l=>{i.large_text=l,m()}},"Large Image Text"))),t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},v&&t.createElement(S,{value:i.small_image,options:v,onChange:l=>{i.small_image=l.value,m()}},"Small Image"),t.createElement(u,{value:i.small_text,onChange:l=>{i.small_text=l,m()}},"Small Image Text")))),t.createElement(W,{title:"Buttons",opened:a,onChange:()=>!C(!a)&&Y(!1)},i.buttons.map((l,h)=>t.createElement(c,{wrap:c.Wrap.WRAP},t.createElement(E,{wrap:!0,grow:1,shrink:1},t.createElement(u,{value:l.url,placeholder:"https://",onChange:T=>{i.buttons[h].url=T,m()}},"Button ",h+1," URL"),t.createElement(u,{value:l.label,onChange:T=>{i.buttons[h].label=T,m()}},"Button ",h+1," Text"))))),t.createElement(w,{className:`${A.h5} ${A.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:A.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(U,{user:ye()})))))),we&&t.createElement(me,{onReset:()=>{m(r.persist.ghost.rpcs[e])},onSave:()=>{r.persist.store.rpcs[e]=i,m(),r.persist.ghost.selected===e&&y(i)}})))};const{getCurrentUser:Ee}=d.webpack.findByProps("getCurrentUser"),R={...d.webpack.findByProps("h5"),...d.webpack.findByProps("marginBottom20")};var ve=()=>{H.useNest(r.persist);const[e,s]=g.useState(r.persist.ghost.selected);return t.createElement("div",null,t.createElement(I,{value:r.persist.ghost.disabled,onChange:()=>{r.persist.store.disabled=!r.persist.ghost.disabled,y(r.persist.ghost.disabled?null:r.persist.ghost.rpcs[e])}},"Disabled"),t.createElement(S,{value:e,onChange:n=>s(n.value),options:r.persist.ghost.rpcs.map((n,a)=>({label:n.name,value:a}))},"RPC'S",!isNaN(e)&&r.persist.ghost.selected!==e&&t.createElement(f,{disabled:r.persist.ghost.selected===e,onClick:()=>{r.persist.store.selected=e,r.persist.ghost.disabled||y(r.persist.ghost.rpcs[e])}},"Set as RPC"),e!==null&&t.createElement(f,{onClick:()=>O(t.createElement(k,{rpcName:e}))},"Edit RPC"),t.createElement(f,{onClick:()=>{r.persist.store.rpcs.push(F),s(r.persist.ghost.rpcs.length-1),O(t.createElement(k,{rpcName:r.persist.ghost.rpcs.length-1}))}},"Create new RPC"),t.createElement(f,{color:f.Colors.RED,onClick:()=>V.showConfirmationModal({confirmText:"Delete",content:"Are you sure you want to delete that rpc?",type:"danger"},n=>{!n||(r.persist.store.rpcs.splice(e,1),r.persist.store.selected=null,s(null))})},"Delete RPC")),t.createElement(w,{className:`${R.h5} ${R.marginBottom8}`},"Your RPC:"),t.createElement("div",{className:R.marginBottom20,style:{backgroundColor:"var(--background-floating)"}},t.createElement(U,{user:Ee()})))},Be=()=>Z.injectCSS(".rpcsetting-select{display:flex}.rpcsetting-select .select-1YfRS9{width:-webkit-fill-available}.rpcsetting-select button{margin-left:9px}.userProfileScroll-crpc{padding:8px 0;height:100%}.userProfile-crpc{position:relative;padding:16px}.crpc-edit{width:800px}.crpc-notice{position:fixed}.crpc-lowerMargin{margin-left:5px;margin-right:5px}");let z;function Ce(){r.persist.store.rpcs=[],r.persist.store.rpcs.push(F),r.persist.store.selected=0}var Pe=()=>(r.persist.ghost.rpc1&&!r.persist.ghost.rpcs?ge():r.persist.ghost.rpcs||Ce(),{onLoad(){z=Be(),y(r.persist.ghost.rpcs[r.persist.ghost.selected])},onUnload(){z?.(),y(null)},settings:P.React.createElement(ve)});return Pe})(cumcord.modules.common,cumcord.modules.common.React,cumcord.modules,cumcord.utils,cumcord.pluginData,cumcord.ui.modals,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.patcher);
